(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[106],{790:()=>{},1138:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var o=r(5155),n=r(2115),s=r(5695);function a(){let[e,t]=(0,n.useState)(""),[r,a]=(0,n.useState)(""),[i,l]=(0,n.useState)(""),d=(0,s.useRouter)(),u=async t=>{t.preventDefault();try{let t=await fetch("https://bloc-3-dev-python.onrender.com/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.trim(),mot_de_passe:r})}),o=await t.json();t.ok?(localStorage.setItem("token",o.token),localStorage.setItem("userId",o.user_id),localStorage.setItem("role",o.role),d.push("/")):l(o.error||"Erreur lors de la connexion")}catch(e){console.error("Erreur c\xf4t\xe9 client:",e),l("Erreur de communication avec le serveur.")}};return(0,o.jsxs)("div",{style:{padding:"20px",maxWidth:"400px",margin:"auto",marginTop:"100px"},children:[(0,o.jsx)("h2",{children:"Se connecter"}),(0,o.jsxs)("form",{onSubmit:u,children:[(0,o.jsx)("div",{style:{marginBottom:"10px"},children:(0,o.jsx)("input",{placeholder:"Email",type:"email",value:e,onChange:e=>t(e.target.value),style:{padding:"8px",width:"100%"},required:!0})}),(0,o.jsx)("div",{style:{marginBottom:"10px"},children:(0,o.jsx)("input",{placeholder:"Mot de passe",type:"password",value:r,onChange:e=>a(e.target.value),style:{padding:"8px",width:"100%"},required:!0})}),(0,o.jsx)("button",{type:"submit",style:{width:"100%",padding:"10px",backgroundColor:"#0077cc",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Se connecter"})]}),i&&(0,o.jsx)("p",{style:{color:"red"},children:i})]})}r(790)},5695:(e,t,r)=>{"use strict";var o=r(8999);r.o(o,"useRouter")&&r.d(t,{useRouter:function(){return o.useRouter}})},7108:(e,t,r)=>{Promise.resolve().then(r.bind(r,1138))}},e=>{var t=t=>e(e.s=t);e.O(0,[415,441,684,358],()=>t(7108)),_N_E=e.O()}]);