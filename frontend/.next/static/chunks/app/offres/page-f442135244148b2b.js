(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[66],{1094:e=>{e.exports={pageContainer:"styles_pageContainer__reZgk",pageTitle:"styles_pageTitle__LEhcV",offreGrid:"styles_offreGrid__uCfuB",offreCard:"styles_offreCard__mbOcC",offreNom:"styles_offreNom__sczYu",offreDesc:"styles_offreDesc__4GiWJ",offreDate:"styles_offreDate__5juT1",offrePrice:"styles_offrePrice__9mFk6",offreCapacite:"styles_offreCapacite__f7JGh",btn:"styles_btn__oBujd","btn-primary":"styles_btn-primary__yd3BJ","btn-danger":"styles_btn-danger__7tCHp",panierSection:"styles_panierSection__5ucZi",sectionTitle:"styles_sectionTitle__y234g",emptyMessage:"styles_emptyMessage__c15_Y",panierList:"styles_panierList__m6Gmn",panierItem:"styles_panierItem__MEFdx",total:"styles_total__970Lk","btn-retirer":"styles_btn-retirer__0CL4D","btn-valid":"styles_btn-valid__ktG1C",navbar:"styles_navbar__vVPUT",navButton:"styles_navButton__AMavG",statusSection:"styles_statusSection__n7ql4",statusText:"styles_statusText__IOuLT",btnDeconnexion:"styles_btnDeconnexion__nHYOM",btnNav:"styles_btnNav___brYA",active:"styles_active__o4zSv",btnRetirer:"styles_btnRetirer__FDUIT",btnretirer:"styles_btnretirer__mqwL3"}},6454:(e,r,t)=>{Promise.resolve().then(t.bind(t,7047))},7047:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>d});var s=t(5155),n=t(2115),o=t(851),a=t(1094),l=t.n(a),i=t(8657);let c=(0,o.UU)("https://ilytpvgngoniasezntau.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlseXRwdmduZ29uaWFzZXpudGF1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDc5NjIzMTAsImV4cCI6MjA2MzUzODMxMH0.mWvYffpUzrdqK5Kfp-tHb4KmG6U4llTisqKu1_7RBKY");function d(){let[e,r]=(0,n.useState)([]),[t,o]=(0,n.useState)([]),[a,d]=(0,n.useState)(0),[u,p]=(0,n.useState)(null),[f,_]=(0,n.useState)(null);(0,n.useEffect)(()=>{!async function(){let{data:e,error:t}=await c.from("offres").select("*");if(t)return console.error("Erreur lors de la r\xe9cup\xe9ration des offres:",t);r(e)}();let e=localStorage.getItem("panier");if(e){let r=JSON.parse(e);o(r),d(r.reduce((e,r)=>e+Number(r.prix),0))}let t=localStorage.getItem("userId"),s=localStorage.getItem("role");p(t),_(s)},[]);let g=e=>{if(t.some(r=>r.id===e.id))alert("⚠️ Cette offre est d\xe9j\xe0 dans votre panier.");else{let r=[...t,e];o(r),localStorage.setItem("panier",JSON.stringify(r)),d(r=>r+Number(e.prix)),alert("✅ L'offre a \xe9t\xe9 ajout\xe9e \xe0 votre panier !")}},m=e=>{let r=t.filter(r=>r.id!==e);o(r),localStorage.setItem("panier",JSON.stringify(r));let s=t.find(r=>r.id===e);s&&d(e=>e-Number(s.prix))};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.A,{}),(0,s.jsx)("h1",{className:l().pageTitle,children:"Achetez vos E-tickets pour les Jeux Olympiques"}),(0,s.jsx)("section",{className:l().offreGrid,children:e.map(e=>(0,s.jsxs)("div",{className:l().offreCard,children:[(0,s.jsx)("h2",{className:l().offreNom,children:e.nom}),(0,s.jsx)("p",{className:l().offreDesc,children:e.description}),(0,s.jsxs)("p",{className:l().offreDate,children:["Date : ",e.date_heure]}),(0,s.jsxs)("p",{className:l().offrePrice,children:["Prix : ",e.prix," €"]}),(0,s.jsxs)("p",{className:l().offreCapacite,children:["Capacit\xe9 : ",e.capacite]}),(0,s.jsx)("button",{className:"".concat(l().btn," ").concat(l()["btn-primary"]),onClick:()=>{if(!f||"client"!==f){confirm("Vous devez \xeatre connect\xe9 en tant que client pour r\xe9server. Connectez-vous ou inscrivez-vous.")&&(window.location.href="/connexion");return}g(e)},children:"Acheter Ticket"})]},e.id))}),(0,s.jsxs)("section",{className:l().panierSection,style:{marginTop:"100px"},children:[(0,s.jsx)("h2",{className:l().sectionTitle,children:"Votre Panier"}),0===t.length?(0,s.jsx)("p",{className:l().emptyMessage,children:"Votre panier est vide."}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("ul",{className:l().panierList,children:t.map(e=>(0,s.jsxs)("li",{className:l().panierItem,children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:e.nom})," — ",Number(e.prix).toFixed(2)," €"]}),(0,s.jsx)("button",{className:l().btnRetirer,onClick:()=>m(e.id),children:"Retirer"})]},e.id))}),(0,s.jsxs)("div",{className:l().total,children:["Total : ",Number(a).toFixed(2)," €"]}),(0,s.jsx)("button",{className:l().btnValider,children:"Valider la R\xe9servation"})]})]})]})}},8657:(e,r,t)=>{"use strict";t.d(r,{A:()=>i});var s=t(5155),n=t(6874),o=t.n(n),a=t(2115);let l={color:"white",textDecoration:"none",fontWeight:"bold",padding:"8px 12px",borderRadius:"4px",transition:"background-color 0.3s",cursor:"pointer"},i=()=>{let[e,r]=(0,a.useState)(!1),[t,n]=(0,a.useState)(null),[i,c]=(0,a.useState)(0),[d,u]=(0,a.useState)(!0);return((0,a.useEffect)(()=>{let e=localStorage.getItem("userId"),t=localStorage.getItem("role");e&&t?(r(!0),n(t)):(r(!1),n(null));let s=localStorage.getItem("panier");s?c(JSON.parse(s).length):c(0),u(!1)},[]),d)?null:(0,s.jsxs)("nav",{style:{padding:"10px",backgroundColor:"#333",display:"flex",alignItems:"center",gap:"20px"},children:[(0,s.jsx)(o(),{href:"/",style:l,onMouseOver:e=>e.currentTarget.style.backgroundColor="rgba(255,255,255,0.2)",onMouseOut:e=>e.currentTarget.style.backgroundColor="transparent",children:"Accueil"}),(0,s.jsx)(o(),{href:"/offres",style:l,onMouseOver:e=>e.currentTarget.style.backgroundColor="rgba(255,255,255,0.2)",onMouseOut:e=>e.currentTarget.style.backgroundColor="transparent",children:"Nos Offres"}),e&&(0,s.jsx)(o(),{href:"/profil",style:l,onMouseOver:e=>e.currentTarget.style.backgroundColor="rgba(255,255,255,0.2)",onMouseOut:e=>e.currentTarget.style.backgroundColor="transparent",children:"Profil"}),(0,s.jsxs)(o(),{href:"/panier",style:{marginLeft:"auto",display:"flex",alignItems:"center",gap:"5px",...l},onMouseOver:e=>e.currentTarget.style.backgroundColor="rgba(255,255,255,0.2)",onMouseOut:e=>e.currentTarget.style.backgroundColor="transparent",children:[(0,s.jsx)("span",{children:"Panier"}),(0,s.jsx)("span",{style:{background:"red",color:"white",borderRadius:"50%",padding:"2px 8px",fontSize:"0.8em"},children:i})]}),(0,s.jsx)("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:e?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("span",{style:{color:"#fff"},children:["Connect\xe9: ",t]}),(0,s.jsx)("button",{style:{padding:"6px 12px",backgroundColor:"#cc0000",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},onClick:()=>{localStorage.removeItem("userId"),localStorage.removeItem("role"),localStorage.removeItem("panier"),r(!1),n(null)},children:"D\xe9connexion"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{style:{padding:"6px 12px",backgroundColor:"#0077cc",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},onClick:()=>{window.location.href="/connexion"},children:"Connexion"}),(0,s.jsx)(o(),{href:"/inscription",children:(0,s.jsx)("button",{style:{padding:"6px 12px",backgroundColor:"#28a745",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Inscription"})})]})})]})}}},e=>{var r=r=>e(e.s=r);e.O(0,[269,851,874,441,684,358],()=>r(6454)),_N_E=e.O()}]);