(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[106],{790:()=>{},1138:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s(5155),i=s(2115),a=s(5695),o=s(851);s(790);let n=(0,o.UU)("https://ilytpvgngoniasezntau.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlseXRwdmduZ29uaWFzZXpudGF1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDc5NjIzMTAsImV4cCI6MjA2MzUzODMxMH0.mWvYffpUzrdqK5Kfp-tHb4KmG6U4llTisqKu1_7RBKY");function l(){let[e,t]=(0,i.useState)(""),[s,o]=(0,i.useState)(""),[l,u]=(0,i.useState)(""),d=(0,a.useRouter)(),p=async t=>{t.preventDefault(),u("");let{data:r,error:i}=await n.auth.signInWithPassword({email:e.trim(),password:s});if(i)return void u(i.message);if(r.session){localStorage.setItem("supabase.auth.token",JSON.stringify(r.session));let e=r.session.user.id;localStorage.setItem("userId",e);let{data:t,error:s}=await n.from("utilisateurs").select("role").eq("id",e).single();if(s)return void u(s.message);localStorage.setItem("role",t.role),d.push("/")}};return(0,r.jsxs)("div",{style:{padding:"20px",maxWidth:"400px",margin:"auto",marginTop:"100px"},children:[(0,r.jsx)("h2",{children:"Se connecter"}),(0,r.jsxs)("form",{onSubmit:p,children:[(0,r.jsx)("div",{style:{marginBottom:"10px"},children:(0,r.jsx)("input",{placeholder:"Email",type:"email",value:e,onChange:e=>t(e.target.value),style:{padding:"8px",width:"100%"},required:!0})}),(0,r.jsx)("div",{style:{marginBottom:"10px"},children:(0,r.jsx)("input",{placeholder:"Mot de passe",type:"password",value:s,onChange:e=>o(e.target.value),style:{padding:"8px",width:"100%"},required:!0})}),(0,r.jsx)("button",{type:"submit",style:{width:"100%",padding:"10px",backgroundColor:"#0077cc",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Se connecter"})]}),l&&(0,r.jsx)("p",{style:{color:"red"},children:l})]})}},5695:(e,t,s)=>{"use strict";var r=s(8999);s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}})},7108:(e,t,s)=>{Promise.resolve().then(s.bind(s,1138))}},e=>{var t=t=>e(e.s=t);e.O(0,[415,851,441,684,358],()=>t(7108)),_N_E=e.O()}]);