(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{1544:(e,s,a)=>{Promise.resolve().then(a.bind(a,7161))},7026:()=>{},7161:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>n});var t=a(5155),l=a(2115),r=a(851);a(7026);let i=(0,r.UU)("https://ilytpvgngoniasezntau.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlseXRwdmduZ29uaWFzZXpudGF1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDc5NjIzMTAsImV4cCI6MjA2MzUzODMxMH0.mWvYffpUzrdqK5Kfp-tHb4KmG6U4llTisqKu1_7RBKY");function n(){let[e,s]=(0,l.useState)([]),[a,r]=(0,l.useState)(""),[n,o]=(0,l.useState)(""),[c,u]=(0,l.useState)(0),[m,d]=(0,l.useState)(1),[p,f]=(0,l.useState)(""),[h,j]=(0,l.useState)([]),[x,N]=(0,l.useState)(""),[g,v]=(0,l.useState)(""),[b,C]=(0,l.useState)(""),[E,I]=(0,l.useState)(""),[S,y]=(0,l.useState)(""),D=async()=>{let{data:e,error:a}=await i.from("offres").select("*");a?console.error("Erreur fetching offres:",a):s(e)},w=async()=>{let{data:e,error:s}=await i.from("utilisateurs").select("*");s?console.error("Erreur fetching utilisateurs:",s):j(e.filter(e=>"employe"===e.role))};(0,l.useEffect)(()=>{let e=localStorage.getItem("role")||"";if(console.log("Role from localStorage:",e),"admin"!==e.trim().toLowerCase()){alert("Acc\xe8s non autoris\xe9"),window.location.href="/";return}D(),w()},[]);let O=async e=>{let{error:s}=await i.from("offres").delete().match({id:e});s?f("\uD83D\uDD34 Erreur lors de la suppression"):(f("\uD83D\uDD34 Offre supprim\xe9e"),D())},k=async()=>{let{error:e}=await i.from("offres").insert([{nom:a,description:n,prix:c,capacite:m}]);e?f("\uD83D\uDD34 Erreur lors de l'ajout"):(f("\uD83D\uDFE2 Offre ajout\xe9e avec succ\xe8s"),D(),r(""),o(""),u(0),d(1))},z=async e=>{let{error:s}=await i.from("utilisateurs").delete().match({id:e});s?y("Erreur lors de la suppression"):(y("Utilisateur ".concat(e," supprim\xe9")),w())},A=async()=>{let{error:e}=await i.from("utilisateurs").insert([{nom:x,prenom:g,email:b,role:"employe"}]);e?y("\uD83D\uDD34 Erreur lors de l'ajout"):(y("Employ\xe9 ajout\xe9 avec succ\xe8s"),w(),N(""),v(""),C(""),I(""))};return(0,t.jsxs)("div",{className:"page-container",children:[(0,t.jsx)("h1",{className:"page-header",children:"\uD83D\uDEE0️ Gestion Admin des Offres"}),(0,t.jsxs)("section",{className:"section",children:[(0,t.jsx)("h2",{children:"Liste des offres"}),0===e.length?(0,t.jsx)("p",{children:"Aucune offre disponible."}):e.map(e=>(0,t.jsxs)("div",{className:"offre-item",children:[(0,t.jsx)("h3",{className:"offre-title",children:e.nom}),(0,t.jsx)("p",{className:"offre-desc",children:e.description}),(0,t.jsxs)("small",{className:"offre-info",children:["Prix : ",e.prix," € | Capacit\xe9 : ",e.capacite]}),(0,t.jsx)("button",{className:"btn btn-delete",onClick:()=>O(e.id),children:"Supprimer"})]},e.id))]}),(0,t.jsxs)("section",{className:"section",children:[(0,t.jsx)("h2",{children:"\uD83D\uDCDD Ajouter une offre"}),(0,t.jsx)("input",{className:"input-field",placeholder:"Nom",value:a,onChange:e=>r(e.target.value)}),(0,t.jsx)("textarea",{className:"input-field",placeholder:"Description",value:n,onChange:e=>o(e.target.value)}),(0,t.jsx)("input",{className:"input-field",type:"number",placeholder:"Prix (€)",value:c,onChange:e=>u(parseFloat(e.target.value))}),(0,t.jsx)("input",{className:"input-field",type:"number",placeholder:"Capacit\xe9",value:m,onChange:e=>d(parseInt(e.target.value))}),(0,t.jsx)("button",{className:"btn btn-add",onClick:k,children:"Ajouter Offre"}),p&&(0,t.jsx)("p",{className:"message",children:p})]}),(0,t.jsx)("h2",{children:"Liste des Employ\xe9s"}),h.map(e=>(0,t.jsxs)("div",{className:"user-item",children:[(0,t.jsxs)("p",{children:[e.nom," ",e.prenom," - ",e.email]}),(0,t.jsx)("button",{className:"btn btn-delete",onClick:()=>z(e.id),children:"Supprimer"})]},e.id)),(0,t.jsx)("h2",{children:"\uD83D\uDCDD Ajouter un Employ\xe9"}),(0,t.jsx)("input",{className:"input-field",placeholder:"Nom",value:x,onChange:e=>N(e.target.value)}),(0,t.jsx)("input",{className:"input-field",placeholder:"Pr\xe9nom",value:g,onChange:e=>v(e.target.value)}),(0,t.jsx)("input",{className:"input-field",placeholder:"Email",value:b,onChange:e=>C(e.target.value)}),(0,t.jsx)("button",{className:"btn btn-add",onClick:A,children:"Ajouter Employ\xe9"}),S&&(0,t.jsx)("p",{className:"message",children:S})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[971,851,441,684,358],()=>s(1544)),_N_E=e.O()}]);