(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{1544:(e,s,t)=>{Promise.resolve().then(t.bind(t,7161))},7026:()=>{},7161:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>n});var a=t(5155),r=t(2115),l=t(851);t(7026);let i=(0,l.UU)("https://ilytpvgngoniasezntau.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlseXRwdmduZ29uaWFzZXpudGF1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDc5NjIzMTAsImV4cCI6MjA2MzUzODMxMH0.mWvYffpUzrdqK5Kfp-tHb4KmG6U4llTisqKu1_7RBKY");function n(){let[e,s]=(0,r.useState)([]),[t,l]=(0,r.useState)(""),[n,c]=(0,r.useState)(""),[u,o]=(0,r.useState)(0),[d,m]=(0,r.useState)(1),[p,f]=(0,r.useState)(""),[h,j]=(0,r.useState)([]),[x,N]=(0,r.useState)(""),[b,g]=(0,r.useState)(""),[v,C]=(0,r.useState)(""),[I,y]=(0,r.useState)(""),[E,S]=(0,r.useState)(""),D=async()=>{let{data:e,error:t}=await i.from("offres").select("*");t?console.error("Erreur fetching offres:",t):s(e)},w=async()=>{let{data:e,error:s}=await i.from("utilisateurs").select("*");s?console.error("Erreur fetching utilisateurs:",s):j(e.filter(e=>"employe"===e.role))};(0,r.useEffect)(()=>{if("admin"!==localStorage.getItem("role")){alert("Acc\xe8s non autoris\xe9"),window.location.href="/";return}D(),w()},[]);let O=async e=>{let{error:s}=await i.from("offres").delete().match({id:e});s?f("\uD83D\uDD34 Erreur lors de la suppression"):(f("\uD83D\uDD34 Offre supprim\xe9e"),D())},k=async()=>{let{error:e}=await i.from("offres").insert([{nom:t,description:n,prix:u,capacite:d}]);e?f("\uD83D\uDD34 Erreur lors de l'ajout"):(f("\uD83D\uDFE2 Offre ajout\xe9e avec succ\xe8s"),D(),l(""),c(""),o(0),m(1))},z=async e=>{let{error:s}=await i.from("utilisateurs").delete().match({id:e});s?S("Erreur lors de la suppression"):(S("Utilisateur ".concat(e," supprim\xe9")),w())},A=async()=>{let{error:e}=await i.from("utilisateurs").insert([{nom:x,prenom:b,email:v,role:"employe"}]);e?S("\uD83D\uDD34 Erreur lors de l'ajout"):(S("Employ\xe9 ajout\xe9 avec succ\xe8s"),w(),N(""),g(""),C(""),y(""))};return(0,a.jsxs)("div",{className:"page-container",children:[(0,a.jsx)("h1",{className:"page-header",children:"\uD83D\uDEE0️ Gestion Admin des Offres"}),(0,a.jsxs)("section",{className:"section",children:[(0,a.jsx)("h2",{children:"Liste des offres"}),0===e.length?(0,a.jsx)("p",{children:"Aucune offre disponible."}):e.map(e=>(0,a.jsxs)("div",{className:"offre-item",children:[(0,a.jsx)("h3",{className:"offre-title",children:e.nom}),(0,a.jsx)("p",{className:"offre-desc",children:e.description}),(0,a.jsxs)("small",{className:"offre-info",children:["Prix : ",e.prix," € | Capacit\xe9 : ",e.capacite]}),(0,a.jsx)("button",{className:"btn btn-delete",onClick:()=>O(e.id),children:"Supprimer"})]},e.id))]}),(0,a.jsxs)("section",{className:"section",children:[(0,a.jsx)("h2",{children:"\uD83D\uDCDD Ajouter une offre"}),(0,a.jsx)("input",{className:"input-field",placeholder:"Nom",value:t,onChange:e=>l(e.target.value)}),(0,a.jsx)("textarea",{className:"input-field",placeholder:"Description",value:n,onChange:e=>c(e.target.value)}),(0,a.jsx)("input",{className:"input-field",type:"number",placeholder:"Prix (€)",value:u,onChange:e=>o(parseFloat(e.target.value))}),(0,a.jsx)("input",{className:"input-field",type:"number",placeholder:"Capacit\xe9",value:d,onChange:e=>m(parseInt(e.target.value))}),(0,a.jsx)("button",{className:"btn btn-add",onClick:k,children:"Ajouter Offre"}),p&&(0,a.jsx)("p",{className:"message",children:p})]}),(0,a.jsx)("h2",{children:"Liste des Employ\xe9s"}),h.map(e=>(0,a.jsxs)("div",{className:"user-item",children:[(0,a.jsxs)("p",{children:[e.nom," ",e.prenom," - ",e.email]}),(0,a.jsx)("button",{className:"btn btn-delete",onClick:()=>z(e.id),children:"Supprimer"})]},e.id)),(0,a.jsx)("h2",{children:"\uD83D\uDCDD Ajouter un Employ\xe9"}),(0,a.jsx)("input",{className:"input-field",placeholder:"Nom",value:x,onChange:e=>N(e.target.value)}),(0,a.jsx)("button",{className:"btn btn-add",onClick:A,children:"Ajouter Employ\xe9"})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[971,851,441,684,358],()=>s(1544)),_N_E=e.O()}]);