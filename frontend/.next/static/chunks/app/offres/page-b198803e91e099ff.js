(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[66],{1094:e=>{e.exports={pageContainer:"styles_pageContainer__reZgk",pageTitle:"styles_pageTitle__LEhcV",offreGrid:"styles_offreGrid__uCfuB",offreCard:"styles_offreCard__mbOcC",offreNom:"styles_offreNom__sczYu",offreDesc:"styles_offreDesc__4GiWJ",offreDate:"styles_offreDate__5juT1",offrePrice:"styles_offrePrice__9mFk6",offreCapacite:"styles_offreCapacite__f7JGh",btn:"styles_btn__oBujd","btn-primary":"styles_btn-primary__yd3BJ","btn-danger":"styles_btn-danger__7tCHp",panierSection:"styles_panierSection__5ucZi",sectionTitle:"styles_sectionTitle__y234g",emptyMessage:"styles_emptyMessage__c15_Y",panierList:"styles_panierList__m6Gmn",panierItem:"styles_panierItem__MEFdx",total:"styles_total__970Lk","btn-retirer":"styles_btn-retirer__0CL4D","btn-valid":"styles_btn-valid__ktG1C",navbar:"styles_navbar__vVPUT",navButton:"styles_navButton__AMavG",statusSection:"styles_statusSection__n7ql4",statusText:"styles_statusText__IOuLT",btnDeconnexion:"styles_btnDeconnexion__nHYOM",btnNav:"styles_btnNav___brYA",active:"styles_active__o4zSv",btnRetirer:"styles_btnRetirer__FDUIT",btnretirer:"styles_btnretirer__mqwL3"}},6454:(e,t,r)=>{Promise.resolve().then(r.bind(r,7047))},7047:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var s=r(5155),n=r(2115),o=r(1094),a=r.n(o),l=r(8657);function i(){let[e,t]=(0,n.useState)([]),[r,o]=(0,n.useState)([]),[i,c]=(0,n.useState)(0),[d,u]=(0,n.useState)(null),[p,f]=(0,n.useState)(null);(0,n.useEffect)(()=>{fetch("http://127.0.0.1:5000/offres").then(e=>e.json()).then(e=>t(e)).catch(e=>console.error("Erreur :",e));let e=localStorage.getItem("panier");if(e){let t=JSON.parse(e);o(t),c(t.reduce((e,t)=>e+Number(t.prix),0))}let r=localStorage.getItem("userId"),s=localStorage.getItem("role");u(r),f(s)},[]);let _=e=>{if(r.some(t=>t.id===e.id))alert("⚠️ Cette offre est d\xe9j\xe0 dans votre panier.");else{let t=[...r,e];o(t),localStorage.setItem("panier",JSON.stringify(t)),c(t=>t+Number(e.prix)),alert("✅ L'offre a \xe9t\xe9 ajout\xe9e \xe0 votre panier !")}},g=e=>{let t=r.filter(t=>t.id!==e);o(t),localStorage.setItem("panier",JSON.stringify(t));let s=r.find(t=>t.id===e);s&&c(e=>e-Number(s.prix))};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.A,{}),(0,s.jsx)("h1",{className:a().pageTitle,children:"Achetez vos E-tickets pour les Jeux Olympiques"}),(0,s.jsx)("section",{className:a().offreGrid,children:e.map(e=>(0,s.jsxs)("div",{className:a().offreCard,children:[(0,s.jsx)("h2",{className:a().offreNom,children:e.nom}),(0,s.jsx)("p",{className:a().offreDesc,children:e.description}),(0,s.jsxs)("p",{className:a().offreDate,children:["Date : ",e.date_heure]}),(0,s.jsxs)("p",{className:a().offrePrice,children:["Prix : ",e.prix," €"]}),(0,s.jsxs)("p",{className:a().offreCapacite,children:["Capacit\xe9 : ",e.capacite]}),(0,s.jsx)("button",{className:"".concat(a().btn," ").concat(a()["btn-primary"]),onClick:()=>{let t=localStorage.getItem("role");if(!t||"client"!==t){confirm("Vous devez \xeatre connect\xe9 en tant que client pour r\xe9server. Connectez-vous ou inscrivez-vous.")&&(window.location.href="/connexion");return}_(e)},children:"Acheter Ticket"})]},e.id))}),(0,s.jsxs)("section",{className:a().panierSection,style:{marginTop:"100px"},children:[(0,s.jsx)("h2",{className:a().sectionTitle,children:"Votre Panier"}),0===r.length?(0,s.jsx)("p",{className:a().emptyMessage,children:"Votre panier est vide."}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("ul",{className:a().panierList,children:r.map(e=>(0,s.jsxs)("li",{className:a().panierItem,children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:e.nom})," — ",Number(e.prix).toFixed(2)," €"]}),(0,s.jsx)("button",{className:a().btnRetirer,onClick:()=>g(e.id),children:"Retirer"})]},e.id))}),(0,s.jsxs)("div",{className:a().total,children:["Total : ",Number(i).toFixed(2)," €"]}),(0,s.jsx)("button",{className:a().btnValider,children:"Valider la R\xe9servation"})]})]})]})}},8657:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var s=r(5155),n=r(6874),o=r.n(n),a=r(2115);let l={color:"white",textDecoration:"none",fontWeight:"bold",padding:"8px 12px",borderRadius:"4px",transition:"background-color 0.3s",cursor:"pointer"},i=()=>{let[e,t]=(0,a.useState)(!1),[r,n]=(0,a.useState)(null),[i,c]=(0,a.useState)(0),[d,u]=(0,a.useState)(!0);return((0,a.useEffect)(()=>{let e=localStorage.getItem("userId"),r=localStorage.getItem("role");e&&r?(t(!0),n(r)):(t(!1),n(null));let s=localStorage.getItem("panier");s?c(JSON.parse(s).length):c(0),u(!1)},[]),d)?null:(0,s.jsxs)("nav",{style:{padding:"10px",backgroundColor:"#333",display:"flex",alignItems:"center",gap:"20px"},children:[(0,s.jsx)(o(),{href:"/",style:l,onMouseOver:e=>e.currentTarget.style.backgroundColor="rgba(255,255,255,0.2)",onMouseOut:e=>e.currentTarget.style.backgroundColor="transparent",children:"Accueil"}),(0,s.jsx)(o(),{href:"/offres",style:l,onMouseOver:e=>e.currentTarget.style.backgroundColor="rgba(255,255,255,0.2)",onMouseOut:e=>e.currentTarget.style.backgroundColor="transparent",children:"Nos Offres"}),e&&(0,s.jsx)(o(),{href:"/profil",style:l,onMouseOver:e=>e.currentTarget.style.backgroundColor="rgba(255,255,255,0.2)",onMouseOut:e=>e.currentTarget.style.backgroundColor="transparent",children:"Profil"}),(0,s.jsxs)(o(),{href:"/panier",style:{marginLeft:"auto",display:"flex",alignItems:"center",gap:"5px",...l},onMouseOver:e=>e.currentTarget.style.backgroundColor="rgba(255,255,255,0.2)",onMouseOut:e=>e.currentTarget.style.backgroundColor="transparent",children:[(0,s.jsx)("span",{children:"Panier"}),(0,s.jsx)("span",{style:{background:"red",color:"white",borderRadius:"50%",padding:"2px 8px",fontSize:"0.8em"},children:i})]}),(0,s.jsx)("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:e?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("span",{style:{color:"#fff"},children:["Connect\xe9: ",r]}),(0,s.jsx)("button",{style:{padding:"6px 12px",backgroundColor:"#cc0000",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},onClick:()=>{localStorage.removeItem("userId"),localStorage.removeItem("role"),localStorage.removeItem("panier"),t(!1),n(null)},children:"D\xe9connexion"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{style:{padding:"6px 12px",backgroundColor:"#0077cc",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},onClick:()=>{window.location.href="/connexion"},children:"Connexion"}),(0,s.jsx)(o(),{href:"/inscription",children:(0,s.jsx)("button",{style:{padding:"6px 12px",backgroundColor:"#28a745",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Inscription"})})]})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[269,874,441,684,358],()=>t(6454)),_N_E=e.O()}]);