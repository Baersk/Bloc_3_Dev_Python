(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[716],{260:()=>{},1494:(e,i,s)=>{Promise.resolve().then(s.bind(s,9367))},9367:(e,i,s)=>{"use strict";s.r(i),s.d(i,{default:()=>r});var l=s(5155),n=s(2115),t=s(851);s(260);let a=(0,t.UU)("https://ilytpvgngoniasezntau.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlseXRwdmduZ29uaWFzZXpudGF1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDc5NjIzMTAsImV4cCI6MjA2MzUzODMxMH0.mWvYffpUzrdqK5Kfp-tHb4KmG6U4llTisqKu1_7RBKY");function r(){let[e,i]=(0,n.useState)(""),[s,t]=(0,n.useState)(""),[r,c]=(0,n.useState)(null),[o,u]=(0,n.useState)(!0);(0,n.useEffect)(()=>{!async function(){let{data:e}=await a.auth.getSession();if(!e.session){alert("Acc\xe8s non autoris\xe9"),window.location.href="/connexion";return}let{data:i,error:s}=await a.from("utilisateurs").select("role").eq("email",e.session.user.email).single();if(s||(null==i?void 0:i.role)!=="employe"){alert("Acc\xe8s non autoris\xe9"),window.location.href="/connexion";return}c(i.role),u(!1)}()},[]);let d=async()=>{if(!e.trim())return void t("❌ Veuillez entrer un QR Code.");let{data:i,error:s}=await a.from("billets").select("valide, message").eq("qr_code_base64",e).single();if(s)return void t("❌ Erreur lors de la v\xe9rification.");(null==i?void 0:i.valide)?t("✅ Billet Valide : ".concat(i.message)):t("❌ Billet Non Valide : ".concat((null==i?void 0:i.message)||"Billet inconnu"))};return o?(0,l.jsx)("p",{children:"Chargement..."}):"employe"!==r?(0,l.jsx)("p",{children:"Acc\xe8s non autoris\xe9"}):(0,l.jsxs)("div",{className:"page-container",children:[(0,l.jsx)("h1",{children:"Scanner et V\xe9rification des billets"}),(0,l.jsx)("input",{type:"text",placeholder:"Entrer le QR Code du billet",value:e,onChange:e=>i(e.target.value),className:"input-field"}),(0,l.jsx)("button",{onClick:d,className:"btn",children:"V\xe9rifier"}),s&&(0,l.jsx)("div",{className:"message ".concat(s.includes("✅")?"message-success":"message-error"),children:s})]})}}},e=>{var i=i=>e(e.s=i);e.O(0,[549,851,441,684,358],()=>i(1494)),_N_E=e.O()}]);